"use strict";var Calculator=function(numberPrecision,outputTopDOM,outputBottomDOM){var precision=numberPrecision,outputTop=outputTopDOM,outputBottom=outputBottomDOM,txtTop="",txtBottom="",prettyTop="",prettyBottom="",stripEndArr=["+","-","*","/","."],unclosedParens=0,canClearWithNum=!1,canClear=!1;return{printTopOutput:function(){outputTop.html(""===txtTop?"&nbsp;":"&gt;"+txtTop)},printBottomOutput:function(){outputBottom.html(""===txtBottom?"&nbsp;":txtBottom)},inputNum:function(t){canClear?(this.clearEntry(),canClear=!1,canClearWithNum=!1):canClearWithNum&&(this.clearEntry(),canClearWithNum=!1),txtBottom+=t,this.printBottomOutput()},calculate:function(){for(;stripEndArr.indexOf(txtBottom.charAt(txtBottom.length-1))!==-1;)txtBottom=txtBottom.slice(0,-1);if(txtTop=txtBottom,""!==txtBottom)try{var answer=Number(Number(eval(txtBottom).toFixed(14)).toPrecision(16)).toString();isNaN(answer)?(txtBottom="That's undefined.",canClear=!0):txtBottom=answer}catch(t){txtBottom="Invalid input.",canClear=!0}this.printTopOutput(),this.printBottomOutput(),canClearWithNum=!0},operate:function(t){canClear&&(txtBottom="",canClear=!1);var o=txtBottom.charAt(txtBottom.length-1);switch(t){case"+":switch(o){case"":case"+":break;case"-":txtBottom=txtBottom.slice(0,-1)+"+";break;default:txtBottom+="+"}break;case"-":switch(o){case"-":break;case"+":txtBottom=txtBottom.slice(0,-1)+"-";break;default:txtBottom+="-"}break;case"*":switch(o){case"":break;case"+":txtBottom=txtBottom.slice(0,-1)+"*";break;case"-":txtBottom=txtBottom.slice(0,-1)+"*";break;case"*":break;case"/":txtBottom=txtBottom.slice(0,-1)+"*";break;default:txtBottom+="*"}break;case"/":switch(o){case"":break;case"+":txtBottom=txtBottom.slice(0,-1)+"/";break;case"-":txtBottom=txtBottom.slice(0,-1)+"/";break;case"/":break;case"*":txtBottom=txtBottom.slice(0,-1)+"/";break;default:txtBottom+="/"}break;case".":this.decimal()}canClearWithNum=!1,this.printTopOutput(),this.printBottomOutput()},decimal:function(){console.log(canClearWithNum),canClearWithNum&&(txtBottom=""),txtBottom+=".",this.printBottomOutput(txtBottom)},allClear:function(){this.clearEntry(),txtTop="",this.printTopOutput(txtTop)},clearEntry:function(){canClear=!1,canClearWithNum=!1,txtBottom="",this.printBottomOutput(txtBottom)},backspace:function(){""!==txtBottom&&(canClear?(canClear=!1,txtBottom=""):"y"===txtBottom.charAt(txtBottom.length-1)?(txtBottom="",canClearWithNum=!1):(txtBottom=txtBottom.slice(0,-1),canClearWithNum="y"===txtBottom.charAt(txtBottom.length-1)),this.printBottomOutput(txtBottom))}}};$(document).ready(function(){var t=new Calculator(14,$("#output-top"),$("#output-bottom"));$(".num").on("click",function(){t.inputNum($(this).text())}),$(".mod").on("click",function(){var o=$(this).data("input");switch(o){case"ac":t.allClear();break;case"ce":t.clearEntry();break;case"backspace":t.backspace();break;case"+":case"-":case"*":case"/":case".":t.operate(o);break;case"=":t.calculate()}}),$(document).on("keydown",function(o){switch(o.which){case 8:return t.backspace(),!1;case 46:t.allClear()}}),$(document).on("keypress",function(t){switch(console.log("keypress "+t.which),t.which){case 8:t.preventDefault();break;case 120:case 42:$("#multiply").click();break;case 43:$("#plus").click();break;case 45:$("#minus").click();break;case 46:$("#decimal").click();break;case 47:$("#divide").click(),t.preventDefault();break;case 48:$("#zero").click();break;case 49:$("#one").click();break;case 50:$("#two").click();break;case 51:$("#three").click();break;case 52:$("#four").click();break;case 53:$("#five").click();break;case 54:$("#six").click();break;case 55:$("#seven").click();break;case 56:$("#eight").click();break;case 57:$("#nine").click();break;case 13:case 61:$("#equals").click()}})});