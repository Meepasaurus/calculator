"use strict";var Calculator=function(numberPrecision,outputTopDOM,outputBottomDOM,historyDOM){var precision=numberPrecision,outputTop=outputTopDOM,outputBottom=outputBottomDOM,history=historyDOM,txtTop="",txtBottom="",stripEndArr=["+","-","*","/"],unclosedParens=0,canDecimal=!0,canClearWithNum=!1,canClear=!1;return{printOutput:function(t,e){t?(outputTop.html(""===txtTop?"&nbsp;":"&gt;"+txtTop),e&&""!==txtBottom&&history.prepend($('<p class="flow-text">').html(outputTop.html()))):(outputBottom.html(""===txtBottom?"&nbsp;":txtBottom),e&&""!==txtBottom&&history.prepend($('<p class="flow-text">').html(outputBottom.html())))},inputNum:function(t){canClear?(this.clearEntry(),canClear=!1,canClearWithNum=!1):canClearWithNum&&(this.clearEntry(),canClearWithNum=!1),txtBottom+=t,this.printOutput(!1,!1)},calculate:function(){if(""!==txtBottom){for(;stripEndArr.indexOf(txtBottom.charAt(txtBottom.length-1))!==-1;)txtBottom=txtBottom.slice(0,-1);for(txtBottom=txtBottom.replace(/\d+(?:\.\d+)?/g,function(t){return Number(t)});unclosedParens>0;)txtBottom+=")",unclosedParens--;txtBottom=txtBottom.replace(/[\d\.]\(|\)[\d\.]|\)\(/g,function(t){return t=t.split(""),t.splice(1,0,"*"),t.join("")})}if(txtTop=txtBottom,""!==txtBottom)try{var answer=Number(Number(eval(txtBottom).toFixed(14)).toPrecision(16)).toString();isNaN(answer)?(txtBottom="That's undefined.",canClear=!0):txtBottom=answer}catch(t){txtBottom="Invalid input.",canClear=!0}this.printOutput(!1,!0),this.printOutput(!0,!0),canClearWithNum=!0},operate:function(t){canClear&&(txtBottom="",canClear=!1);var e=txtBottom.charAt(txtBottom.length-1);switch(t){case"+":switch(e){case"":Materialize.toast("Cannot start input with +",2e3,"toast");break;case"+":break;case"-":txtBottom=txtBottom.slice(0,-1)+"+";break;default:txtBottom+="+"}canDecimal=!0;break;case"-":switch(e){case"-":break;case"+":txtBottom=txtBottom.slice(0,-1)+"-";break;default:txtBottom+="-"}canDecimal=!0;break;case"*":switch(e){case"":Materialize.toast("Cannot start input with &Cross;",2e3,"toast");break;case"+":txtBottom=txtBottom.slice(0,-1)+"*";break;case"-":txtBottom=txtBottom.slice(0,-1)+"*";break;case"*":break;case"/":txtBottom=txtBottom.slice(0,-1)+"*";break;default:txtBottom+="*"}canDecimal=!0;break;case"/":switch(e){case"":Materialize.toast("Cannot start input with &divide;",2e3,"toast");break;case"+":txtBottom=txtBottom.slice(0,-1)+"/";break;case"-":txtBottom=txtBottom.slice(0,-1)+"/";break;case"/":break;case"*":txtBottom=txtBottom.slice(0,-1)+"/";break;default:txtBottom+="/"}canDecimal=!0;break;case".":this.decimal();break;case"(":txtBottom+="(",unclosedParens++,canDecimal=!0;break;case")":unclosedParens>0?(txtBottom+=")",unclosedParens--,canDecimal=!0):Materialize.toast("Mismatched parenthesis.",2e3,"toast")}canClearWithNum=!1,this.printOutput(!0,!1),this.printOutput(!1,!1)},decimal:function(){canClearWithNum&&(txtBottom="",canDecimal=!0),canDecimal?(txtBottom+=".",canDecimal=!1):Materialize.toast("Please use one decimal point per number.",2e3,"toast")},clearHistory:function(){history.html("")},allClear:function(){this.clearEntry(),txtTop="",this.printOutput(!0,!1)},clearEntry:function(){canClear=!1,canClearWithNum=!1,canDecimal=!0,txtBottom="",this.printOutput(!1,!1)},backspace:function(){if(""!==txtBottom){if(canClear)canClear=!1,txtBottom="";else{var t=txtBottom.charAt(txtBottom.length-1);switch(t){case".":txtBottom=txtBottom.slice(0,-1),canDecimal=!0;break;case"(":unclosedParens--,txtBottom=txtBottom.slice(0,-1);break;case")":unclosedParens++,txtBottom=txtBottom.slice(0,-1);break;case"y":txtBottom="";break;default:txtBottom=txtBottom.slice(0,-1)}t=txtBottom.charAt(txtBottom.length-1),canClearWithNum="y"===t}this.printOutput(!1,!1)}}}};$(document).ready(function(){var t=new Calculator(14,$("#output-top"),$("#output-bottom"),$("#history-text"));$(".num").on("click",function(){t.inputNum($(this).text())}),$(".mod").on("click",function(){var e=$(this).data("input");switch(e){case"ac":t.allClear();break;case"ce":t.clearEntry();break;case"backspace":t.backspace();break;case"history":t.clearHistory();break;case"+":case"-":case"*":case"/":case".":case"(":case")":case"^":case"sqrt":case"sin":case"cos":case"tan":case"log":t.operate(e);break;case"=":t.calculate()}}),$(document).on("keydown",function(e){switch(e.which){case 8:return t.backspace(),!1;case 46:t.allClear()}}),$(document).on("keypress",function(t){switch(t.which){case 8:t.preventDefault();break;case 40:$("#lp").click();break;case 41:$("#rp").click();break;case 120:case 42:$("#multiply").click();break;case 43:$("#plus").click();break;case 45:$("#minus").click();break;case 46:$("#decimal").click();break;case 47:$("#divide").click(),t.preventDefault();break;case 48:$("#zero").click();break;case 49:$("#one").click();break;case 50:$("#two").click();break;case 51:$("#three").click();break;case 52:$("#four").click();break;case 53:$("#five").click();break;case 54:$("#six").click();break;case 55:$("#seven").click();break;case 56:$("#eight").click();break;case 57:$("#nine").click();break;case 13:case 61:$("#equals").click();break;case 94:$("#caret").click();break;case 99:$("#cos").click();break;case 104:case 113:$("#history").click();break;case 108:$("#log").click();break;case 114:$("#sqrt").click();break;case 115:$("#sin").click();break;case 116:$("#tan").click()}})});