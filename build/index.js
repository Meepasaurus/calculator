"use strict";var Calculator=function(numberPrecision,outputTopDOM,outputBottomDOM,historyDOM){var precision=numberPrecision,outputTop=outputTopDOM,outputBottom=outputBottomDOM,history=historyDOM,txtTop="",txtBottom="",stripEndArr=["+","-","*","/","."],unclosedParens=0,canDecimal=!0,canClearWithNum=!1,canClear=!1;return{printOutput:function(t,a){t?(outputTop.html(""===txtTop?"&nbsp;":"&gt;"+txtTop),a&&history.append($('<p class="flow-text">').html(outputTop.html()))):(outputBottom.html(""===txtBottom?"&nbsp;":txtBottom),a&&history.append($('<p class="flow-text">').html(outputBottom.html())))},inputNum:function(t){canClear?(this.clearEntry(),canClear=!1,canClearWithNum=!1):canClearWithNum&&(this.clearEntry(),canClearWithNum=!1),txtBottom+=t,this.printOutput(!1,!1)},calculate:function(){for(;stripEndArr.indexOf(txtBottom.charAt(txtBottom.length-1))!==-1;)txtBottom=txtBottom.slice(0,-1);if(txtTop=txtBottom,""!==txtBottom)try{var answer=Number(Number(eval(txtBottom).toFixed(14)).toPrecision(16)).toString();isNaN(answer)?(txtBottom="That's undefined.",canClear=!0):txtBottom=answer}catch(t){txtBottom="Invalid input.",canClear=!0}this.printOutput(!0,!0),this.printOutput(!1,!0),history.html(historyDOM.html()),canClearWithNum=!0},operate:function(t){canClear&&(txtBottom="",canClear=!1);var a=txtBottom.charAt(txtBottom.length-1);switch(t){case"+":switch(a){case"":Materialize.toast("Cannot start input with +",3e3,"toast");break;case"+":break;case"-":txtBottom=txtBottom.slice(0,-1)+"+";break;default:txtBottom+="+"}canDecimal=!0;break;case"-":switch(a){case"-":break;case"+":txtBottom=txtBottom.slice(0,-1)+"-";break;default:txtBottom+="-"}canDecimal=!0;break;case"*":switch(a){case"":Materialize.toast("Cannot start input with &Cross;",3e3,"toast");break;case"+":txtBottom=txtBottom.slice(0,-1)+"*";break;case"-":txtBottom=txtBottom.slice(0,-1)+"*";break;case"*":break;case"/":txtBottom=txtBottom.slice(0,-1)+"*";break;default:txtBottom+="*"}canDecimal=!0;break;case"/":switch(a){case"":Materialize.toast("Cannot start input with &divide;",3e3,"toast");break;case"+":txtBottom=txtBottom.slice(0,-1)+"/";break;case"-":txtBottom=txtBottom.slice(0,-1)+"/";break;case"/":break;case"*":txtBottom=txtBottom.slice(0,-1)+"/";break;default:txtBottom+="/"}canDecimal=!0;break;case".":this.decimal()}canClearWithNum=!1,this.printOutput(!0,!1),this.printOutput(!1,!1)},decimal:function(){canClearWithNum&&(txtBottom="",canDecimal=!0),canDecimal?(txtBottom+=".",canDecimal=!1):Materialize.toast("Please use one decimal point per number.",3e3,"toast")},clearHistory:function(){history.html("")},allClear:function(){this.clearEntry(),txtTop="",this.printOutput(!0,!1)},clearEntry:function(){canClear=!1,canClearWithNum=!1,canDecimal=!0,txtBottom="",this.printOutput(!1,!1)},backspace:function(){if(""!==txtBottom){if(canClear)canClear=!1,txtBottom="";else{var t=txtBottom.charAt(txtBottom.length-1);"."===t?(txtBottom=txtBottom.slice(0,-1),canDecimal=!0):"y"===t?(txtBottom="",canClearWithNum=!1):(txtBottom=txtBottom.slice(0,-1),canClearWithNum="y"===t)}this.printOutput(!1,!1)}}}};$(document).ready(function(){var t=new Calculator(14,$("#output-top"),$("#output-bottom"),$("#history-text"));$(".num").on("click",function(){t.inputNum($(this).text())}),$(".mod").on("click",function(){var a=$(this).data("input");switch(a){case"ac":t.allClear();break;case"ce":t.clearEntry();break;case"backspace":t.backspace();break;case"history":t.clearHistory();break;case"+":case"-":case"*":case"/":case".":t.operate(a);break;case"=":t.calculate()}}),$(document).on("keydown",function(a){switch(a.which){case 8:return t.backspace(),!1;case 46:t.allClear()}}),$(document).on("keypress",function(t){switch(console.log("keypress "+t.which),t.which){case 8:t.preventDefault();break;case 120:case 42:$("#multiply").click();break;case 43:$("#plus").click();break;case 45:$("#minus").click();break;case 46:$("#decimal").click();break;case 47:$("#divide").click(),t.preventDefault();break;case 48:$("#zero").click();break;case 49:$("#one").click();break;case 50:$("#two").click();break;case 51:$("#three").click();break;case 52:$("#four").click();break;case 53:$("#five").click();break;case 54:$("#six").click();break;case 55:$("#seven").click();break;case 56:$("#eight").click();break;case 57:$("#nine").click();break;case 13:case 61:$("#equals").click();break;case 104:case 113:$("#history").click()}})});